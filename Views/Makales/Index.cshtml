@using System.Linq
@model IEnumerable<BlogProjesi.Models.Makale>

@{
    ViewData["Title"] = "Makale Yönetimi";
}

<style>
    
    body {
        background-color: #05070a;
        background-image: radial-gradient(circle at 50% -20%, rgba(0, 229, 255, 0.15), transparent 60%), radial-gradient(circle at 50% 120%, rgba(0, 255, 204, 0.1), transparent 60%);
        background-attachment: fixed;
        color: #fff;
    }

    
    .page-title {
        font-family: 'Rajdhani', sans-serif;
        font-weight: 700;
        font-size: 2.5rem;
        color: #00E5FF;
        text-transform: uppercase;
        margin-bottom: 5px;
        text-shadow: 0 0 10px rgba(0, 229, 255, 0.3);
    }

   
    .top-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        margin-bottom: 30px;
        padding: 20px;
        background: rgba(10, 15, 28, 0.8);
        border: 1px solid rgba(0, 229, 255, 0.2);
        border-radius: 15px;
        box-shadow: 0 0 20px rgba(0, 229, 255, 0.1);
        gap: 15px;
    }

    
    .search-group {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
    }

    .search-input {
        background-color: #0b1120;
        border: 1px solid #1e293b;
        color: #fff;
        border-radius: 50px;
        padding: 10px 20px;
        width: 250px;
        outline: none;
        transition: 0.3s;
    }

        .search-input:focus {
            border-color: #00E5FF;
            box-shadow: 0 0 10px rgba(0, 229, 255, 0.2);
        }

    .btn-new-article {
        background: linear-gradient(90deg, #00FFCC, #00ffa6);
        color: #05070a;
        font-weight: 800;
        padding: 10px 25px;
        border-radius: 50px;
        text-decoration: none;
        text-transform: uppercase;
        letter-spacing: 1px;
        box-shadow: 0 0 20px rgba(0, 255, 204, 0.3);
        transition: 0.3s;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        white-space: nowrap;
    }

        .btn-new-article:hover {
            transform: scale(1.05);
            box-shadow: 0 0 40px rgba(0, 255, 204, 0.6);
            color: #000;
        }

    
    .table-container {
        background: rgba(10, 15, 28, 0.9);
        border-radius: 15px;
        overflow: hidden; 
        border: 1px solid rgba(0, 229, 255, 0.1);
        box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
    }

    .table-cyber {
        width: 100%;
        color: #d6d6d6;
        margin-bottom: 0;
        border-collapse: collapse;
    }

        .table-cyber thead {
            background-color: #0f182b;
            color: #00E5FF;
            font-family: 'Rajdhani', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .table-cyber th {
            padding: 20px;
            font-weight: 700;
            border-bottom: 2px solid rgba(0, 229, 255, 0.2);
            text-align: left;
        }

        .table-cyber td {
            padding: 20px;
            vertical-align: middle;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

    .table-img {
        width: 60px;
        height: 60px;
        object-fit: cover;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .badge-cyber {
        background-color: rgba(0, 229, 255, 0.1);
        color: #00E5FF;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
        border: 1px solid rgba(0, 229, 255, 0.3);
    }

   
    .action-btn {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: #fff;
        margin: 0 3px;
        transition: 0.3s;
        text-decoration: none;
        border: none;
    }

    .btn-edit {
        background-color: rgba(255, 193, 7, 0.2);
        color: #ffc107;
        border: 1px solid #ffc107;
    }

        .btn-edit:hover {
            background-color: #ffc107;
            color: #000;
            box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
        }

    .btn-delete {
        background-color: rgba(255, 68, 68, 0.2);
        color: #ff4444;
        border: 1px solid #ff4444;
    }

        .btn-delete:hover {
            background-color: #ff4444;
            color: #fff;
            box-shadow: 0 0 10px rgba(255, 68, 68, 0.5);
        }

    .btn-detail {
        background-color: rgba(0, 229, 255, 0.2);
        color: #00E5FF;
        border: 1px solid #00E5FF;
    }

        .btn-detail:hover {
            background-color: #00E5FF;
            color: #000;
            box-shadow: 0 0 10px rgba(0, 229, 255, 0.5);
        }

    
    @@media (max-width: 768px) {
        
        .top-bar {
            flex-direction: column;
            align-items: stretch;
            text-align: center;
        }

        .search-group {
            flex-direction: column;
            width: 100%;
        }

        .search-input {
            width: 100%;
        }

        .btn-new-article {
            width: 100%;
            justify-content: center;
        }
        
        .table-cyber, .table-cyber thead, .table-cyber tbody, .table-cyber th, .table-cyber td, .table-cyber tr {
            display: block;
        }
            
            .table-cyber thead tr {
                position: absolute;
                top: -9999px;
                left: -9999px;
            }

            .table-cyber tr {
                background: rgba(255, 255, 255, 0.02);
                border: 1px solid rgba(0, 229, 255, 0.2);
                margin-bottom: 15px;
                border-radius: 10px;
                padding: 10px;
            }

            .table-cyber td {
                border: none;
                position: relative;
                padding-left: 50%;
                text-align: right;
                padding: 10px 15px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
                
                .table-cyber td:before {
                    content: attr(data-label);
                    font-weight: 700;
                    color: #00E5FF;
                    text-transform: uppercase;
                    font-size: 0.85rem;
                }
               
                .table-cyber td:first-child {
                    justify-content: center;
                    padding: 15px;
                    background: rgba(0,0,0,0.2);
                    border-radius: 10px;
                    margin-bottom: 10px;
                }

                    .table-cyber td:first-child:before {
                        display: none;
                    }
                
                .table-cyber td:last-child {
                    justify-content: center;
                    gap: 10px;
                    padding-top: 15px;
                    border-top: 1px dashed rgba(255, 255, 255, 0.1);
                }
    }
</style>
@if (TempData["Hata"] != null)
{
    <div class="alert text-center mb-4" role="alert"
         style="background-color: rgba(255, 0, 50, 0.15); border: 1px solid #ff0033; color: #ff4d4d; border-radius: 10px; box-shadow: 0 0 15px rgba(255, 0, 50, 0.3);">
        <i class="fas fa-exclamation-triangle fa-lg me-2"></i> @TempData["Hata"]
    </div>
}

@if (TempData["Basarili"] != null)
{
    <div class="alert text-center mb-4" role="alert"
         style="background-color: rgba(0, 255, 204, 0.15); border: 1px solid #00FFCC; color: #00FFCC; border-radius: 10px;">
        <i class="fas fa-check-circle fa-lg me-2"></i> @TempData["Basarili"]
    </div>
}

<div class="container my-5">

    <form asp-controller="Makales" asp-action="Index" method="get">
        <div class="top-bar">
            <div>
                <h2 class="page-title"><i class="fas fa-layer-group"></i> Makale Yönetimi</h2>
                <p class="text-muted mb-0">Toplam @(Model != null ? Model.Count() : 0) içerik listeleniyor.</p>
            </div>

            <div class="search-group">
                <input type="text" name="aramaKelimesi" value="@ViewData["AramaKelimesi"]" class="search-input" placeholder="Makale ara...">

                <a asp-action="Create" class="btn-new-article">
                    <i class="fas fa-plus"></i> YENİ EKLE
                </a>
            </div>
        </div>
    </form>

    <div class="table-container">
        <table class="table-cyber">
            <thead>
                <tr>
                    <th>GÖRSEL</th>
                    <th>BAŞLIK</th>
                    <th>KATEGORİ</th>
                    <th>TARİH</th>
                    <th class="text-end">İŞLEMLER</th>
                </tr>
            </thead>
            <tbody>
                @if (Model != null && Model.Any())
                {
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td data-label="Görsel">
                                @if (!string.IsNullOrEmpty(item.ResimUrl))
                                {
                                    <img src="@item.ResimUrl" class="table-img" alt="Kapak" />
                                }
                                else
                                {
                                    <div class="table-img d-flex align-items-center justify-content-center bg-dark text-muted">
                                        <i class="fas fa-image"></i>
                                    </div>
                                }
                            </td>
                            <td data-label="Başlık">
                                <strong style="font-size: 1.1rem; color:#fff;">@item.Baslik</strong>
                            </td>
                            <td data-label="Kategori">
                                <span class="badge-cyber">@item.Kategori?.Ad</span>
                            </td>
                            <td data-label="Tarih">
                                <span class="text-muted"><i class="far fa-calendar-alt me-1"></i> @item.OlusturulmaTarihi.ToString("dd.MM.yyyy")</span>
                            </td>
                            <td class="text-end" data-label="İşlemler">
                                <a asp-action="Details" asp-route-id="@item.Id" class="action-btn btn-detail" title="Görüntüle"><i class="fas fa-eye"></i></a>
                                <a asp-action="Edit" asp-route-id="@item.Id" class="action-btn btn-edit" title="Düzenle"><i class="fas fa-pen"></i></a>
                                <a asp-action="Delete" asp-route-id="@item.Id" class="action-btn btn-delete" title="Sil"><i class="fas fa-trash"></i></a>
                            </td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="5" class="text-center py-5" style="color: #888;">
                            <i class="fas fa-search fa-3x mb-3 d-block"></i>
                            Aradığınız kriterlere uygun makale bulunamadı.
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>